{% extends '_layout.html' %}

{% block content %}
<div class="container" id=results_content>
  {% include "partials/results/general_information.html" %}
  <div class="mt-4 card p-3 bg-white">
    <h4 class="text-center pb-2">Gráfico dos Sinais</h4>
    <canvas id="lineChartCanvas" class="px-2 pb-2"></canvas>
  </div>

  {% if results.calibration_values|length > 0 %}
  <div class="mt-4 card p-3 bg-white">
    <h4 class="text-center pb-2">Gráfico de calibração</h4>
    <canvas id="calibrationChartCanvas" class="px-2 pb-2"></canvas>
  </div>
  {% endif %}

  {% include "partials/results/differentiator_table.html" %}
  {% include "partials/results/signals_table.html" %}
  <div class="" style="height: 30px;"></div>
</div>
{% endblock%}

{% block scripts %}
<!-- Bibliotecas necessária para o DateTime Picker -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap-datetimepicker.min.css') }}">
<script src="{{ url_for('static', filename='js/moment.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap-datetimepicker.min.js') }}"></script>
<!-- Biblioteca para construção do gráfico -->
<script src="{{ url_for('static', filename='js/chartjs.min.js') }}"></script>
<script type="">
    {% include 'src/results/my_datetime_picker.js' %}
    {% include 'src/results/generate_files.js' %}
    {% include 'src/results/signals_chart.js' %}
    {% include 'src/results/calibration_chart.js' %}
    registerDatetimePicker(format = 'D-M-YYYY HH:mm:ss');
    drawChart(signals = {{ results.signals|tojson }}, interval = {{ results.interval|round(2) }});
    drawCalibrationChart(calibration_values = {{ results.calibration_values|tojson }})
  </script>
{% endblock%}
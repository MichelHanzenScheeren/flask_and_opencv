{% extends '_layout.html' %}

{% block content %}
<div class="container-fluid px-5" id=results_content>
  <div class="container-fluid px-3">
    {% include "partials/results/general_information.html" %}

    {% include "partials/results/average_information.html" %}

    <div id="sumary" class="mt-4">
      <h4 class="text-center pb-1">Gráfico dos Sinais</h4>
      <div class="container-fluid px-5">
        <div class="row">
          <div class="col-lg card p-3">
            <canvas id="lineChartCanvas" class="p-2"></canvas>
          </div>
        </div>
      </div>
    </div>

    {% if results.calibration_values|length > 0 %}
    <div class="mt-4">
      <h4 class="text-center pb-1">Gráfico de calibração</h4>
      <div class="container-fluid px-5">
        <div class="row">
          <div class="col-lg card p-3">
            <canvas id="calibrationChartCanvas" class="px-2 pb-2"></canvas>
          </div>
        </div>
      </div>
    </div>
    {% endif %}

    {% include "partials/results/differentiator_table.html" %}

    {% include "partials/results/signals_table.html" %}
    <div class="" style="height: 30px;"></div>
  </div> 
</div>
{% endblock%}

{% block scripts %}
<!-- Bibliotecas necessária para o DateTime Picker -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap-datetimepicker.min.css') }}">
<script src="{{ url_for('static', filename='js/moment.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap-datetimepicker.min.js') }}"></script>
<!-- Biblioteca para construção do gráfico -->
<script src="{{ url_for('static', filename='js/chartjs.min.js') }}"></script>
<script type="">
  {% include 'src/results/my_datetime_picker.js' %}
  {% include 'src/results/generate_files.js' %}
  {% include 'src/results/draw_charts.js' %}
</script>
<script type="">
  $(document).ready(function() {
    registerDatetimePicker(format = 'D-M-YYYY HH:mm:ss');
    drawCharts({{results.signals|tojson}}, {{results.interval|round(2)}}, {{results.calibration_values|tojson}});
  });
</script>
{% endblock%}